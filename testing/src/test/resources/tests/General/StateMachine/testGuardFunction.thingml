import "../../thingml.thingml"

thing TestGuardFunction includes Test 
@test "i # EI(X)?"
@test "t # EXTE(X)?"
@test "titi # EXTEIXTEI(X)?"
{
    
    function f() : Boolean do
	    return true
	end
    
	statechart TestInternalTransition init I {	
		state I {
			on entry TestOut('\'E\'' as Char)
			on exit  TestOut('\'X\'' as Char)
			
			internal
			event m : Test?In
			guard m.c == '\'i\'' and f()
			action TestOut('\'I\'' as Char)
			
			transition -> I
			event m : Test?In
			guard m.c == '\'t\'' and f()
			action TestOut('\'T\'' as Char)
			
			internal event Test?Done
			action TestDone()
		}
	}
}
